var e,t,r,n,o,a,c,i=document.querySelector(".button"),s=document.querySelector(".game-score"),u=document.querySelector("tbody"),d=document.querySelector(".message-start"),l=document.querySelector(".message-win"),f=document.querySelector(".message-lose"),v=document.querySelector(".rules"),h=document.querySelector(".rules-exit"),m=document.querySelector(".rules-container");function L(){setTimeout(function(){var e=y();if(0!==e.length){var r=e[Math.floor(Math.random()*e.length)];t[r.row][r.column]=Math.random()>.1?2:4,g()}},150)}function y(){for(var e=[],r=0;r<4;r++)for(var n=0;n<4;n++)0===t[r][n]&&e.push({row:r,column:n});return e}function g(){u.innerHTML="";for(var r=0;r<4;r++){for(var n=document.createElement("tr"),o=0;o<4;o++){var a=t[r][o],c=document.createElement("td");c.textContent=a>0?a:"",c.classList.add("field-cell"),a>0&&c.classList.add("field-cell--".concat(a)),2048===a&&(l.classList.remove("hidden"),i.classList.replace("restart","start"),i.innerText="Start"),n.appendChild(c)}u.appendChild(n)}s.textContent=e,function(){if(y().length>0)return!1;for(var e=0;e<4;e++)for(var r=0;r<3;r++)if(t[e][r]===t[e][r+1]||t[r][e]===t[r+1][e])return!1;return!0}()&&f.classList.remove("hidden")}function b(){r=!1;for(var n=0;n<4;n++)for(var o=1;o<4;o++)if(0!==t[o][n]){for(var a=o;a>0&&0===t[a-1][n];)a--;a!==o&&(t[a][n]=t[o][n],t[o][n]=0,r=!0),a>0&&t[a-1][n]===t[a][n]&&(t[a-1][n]*=2,t[a][n]=0,e+=t[a-1][n],r=!0)}return g(),r}function w(){r=!1;for(var n=0;n<4;n++)for(var o=2;o>=0;o--)if(0!==t[o][n]){for(var a=o;a<3&&0===t[a+1][n];)a++;a!==o&&(t[a][n]=t[o][n],t[o][n]=0,r=!0),a<3&&t[a+1][n]===t[a][n]&&(t[a+1][n]*=2,t[a][n]=0,e+=t[a+1][n],r=!0)}return g(),r}function S(){r=!1;for(var n=0;n<4;n++)for(var o=1;o<4;o++)if(0!==t[n][o]){for(var a=o;a>0&&0===t[n][a-1];)a--;a!==o&&(t[n][a]=t[n][o],t[n][o]=0,r=!0),a>0&&t[n][a-1]===t[n][a]&&(t[n][a-1]*=2,t[n][a]=0,e+=t[n][a-1],r=!0)}return g(),r}function q(){r=!1;for(var n=0;n<4;n++)for(var o=2;o>=0;o--)if(0!==t[n][o]){for(var a=o;a<3&&0===t[n][a+1];)a++;a!==o&&(t[n][a]=t[n][o],t[n][o]=0,r=!0),a<3&&t[n][a+1]===t[n][a]&&(t[n][a+1]*=2,t[n][a]=0,e+=t[n][a+1],r=!0)}return g(),r}i.addEventListener("click",function(){t=Array.from({length:4},function(){return Array.from({length:4},function(){return 0})}),e=0,d.classList.add("hidden"),l.classList.add("hidden"),f.classList.add("hidden"),i.classList.replace("start","restart"),i.innerText="Restart",L(),L()}),document.addEventListener("keydown",function(e){switch(r=!1,e.key){case"ArrowUp":r=b();break;case"ArrowDown":r=w();break;case"ArrowLeft":r=S();break;case"ArrowRight":r=q()}r&&L()}),document.addEventListener("touchstart",function(e){n=e.touches[0].clientX,o=e.touches[0].clientY}),document.addEventListener("touchend",function(e){var t,i;a=e.changedTouches[0].clientX,c=e.changedTouches[0].clientY,r=!1,t=a-n,i=c-o,100>Math.abs(t)&&100>Math.abs(i)||((r=!0==Math.abs(t)>=Math.abs(i)?t>0?q():S():i>0?w():b())&&L(),g())}),v.addEventListener("click",function(){m.classList.remove("visibility")}),h.addEventListener("click",function(){m.classList.add("visibility")});
//# sourceMappingURL=index.e81d13fc.js.map
